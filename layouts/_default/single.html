{{- define "main" }}

<style>
  
    .clearfix:after, .clearfix:before {
        content: " ";
        display: table;
    }
    .text-center {
        text-align: center;
    }

   
   
    .wpcom-icon {
        display: inline-block;
    }

    .wpcom-icon svg {
        fill: currentcolor;
    }
    .wpcom-icon svg {
        width: 1em;
        height: 1em;
        vertical-align: -0.15em;
        fill: currentColor;
        overflow: hidden;
    }

    .share-wx-wrap {
        border-color: rgb(53, 57, 59);
        background-image: initial;
        background-color: rgb(24, 26, 27);
        box-shadow: rgb(0 0 0 / 5%) 0px 0px 3px 1px;
    }
    .share-wx-wrap {
        padding: 0;
        margin: 0 0 0 -81px!important;
        opacity: 0;
        filter: alpha(opacity=0);
        position: absolute;
        z-index: 9;
        left: 50%;
        bottom: 50px;
        width: 160px;
        line-height: 1;
        text-align: center;
        border: 1px solid #efefef;
        background: #fff;
        -webkit-transition: all .3s ease-out 0s;
        -o-transition: all .3s ease-out 0s;
        transition: all .3s ease-out 0s;
        -webkit-box-shadow: 0 0 3px 1px rgb(0 0 0 / 5%);
        box-shadow: 0 0 3px 1px rgb(0 0 0 / 5%);
        -webkit-box-sizing: content-box;
        box-sizing: content-box;
        pointer-events: none;
    }

    .share-wx-wrap:before {
        bottom: -16px;
        border-top-color: #efefef;
    }
    .share-wx-wrap:after, .share-wx-wrap:before {
        position: absolute;
        left: 50%;
        width: 0;
        height: 0;
        margin-left: -8px;
        line-height: 0;
        border: 8px solid transparent;
        content: "";
    }

    .share-wx-wrap span {
        color: rgb(168, 160, 149);
    }
    .share-wx-wrap span {
        display: block;
        padding: 0 0 10px;
        margin: 0!important;
        color: #999;
        font-size: 12px!important;
        line-height: 1!important;
        vertical-align: top;
    }


    .share-wx-wrap canvas, .share-wx-wrap img {
        display: block;
        width: 100%;
        height: auto;
        padding: 10px 10px 0;
        vertical-align: top;
    }


    .entry-bar{height:60px;margin:30px 0}
.entry-bar .info-item.act .wi,.entry-bar .info-item.share .wi{font-size:20px}

@media (max-width:1239px){.entry-bar .info-item.share .mobile{display:none}}
@media (max-width:767px){.entry-bar .author,.entry-bar .info-item.act,.entry-bar .info-item.share .meta-item,.entry-bar .info-item.share:before{display:none}
.entry-bar .info{float:none!important}
.entry-bar .info-item.meta{margin:0;float:right;line-height:30px}
.entry-bar .info-item.share{float:left;margin-right:0;padding-left:0;vertical-align:top}
.entry-bar .info-item.share .mobile{display:block;padding-left:12px;padding-right:12px;color:var(--theme-color);border:1px solid var(--theme-color);line-height:28px;border-radius:30px}
.entry-bar .info-item.share .mobile .wi{font-size:16px}}

.entry-bar .info-item{position:relative;display:inline-block;margin-right:20px;padding-left:20px;color:var(--theme-light-color);line-height:36px}
.entry-bar .info-item:before{position:absolute;left:0;top:50%;width:1px;height:18px;margin-top:-9px;background:var(--theme-light-color);content:"";opacity:.6}
.entry-bar .info-item a{color:inherit;text-decoration:none}
.entry-bar .info-item a:hover,.profile-tab-content .q-content .q-related .q-related-list .q-related-item a:hover,.qapress .q-content .q-related .q-related-list .q-related-item a:hover{color:var(--theme-hover)}
.entry-bar .info-item .stared{color:#ff5e5e}
.entry-bar .info-item .stared:hover{color:#f33}
.entry-bar .meta{padding-left:0}
.entry-bar .meta:before{display:none}
.entry-bar .act{margin-right:0}
.entry-bar .meta-item{position:relative;display:inline-block;padding:0 8px;overflow:hidden;vertical-align:top;-webkit-transition:all .3s ease-out 0s;-o-transition:all .3s ease-out 0s;transition:all .3s ease-out 0s}
.entry-bar .meta-item:first-child{padding-left:0}
.entry-bar .meta-item:last-child,.page-no-sidebar.member-login .footer .footer-nav li:last-child a,.page-no-sidebar.member-register .footer .footer-nav li:last-child a{padding-right:0}
.entry-bar .meta-item:hover{overflow:visible}
.entry-bar .meta-item:hover .dashang-img,.entry-bar .meta-item:hover .share-wx-wrap{opacity:1;filter:alpha(opacity=100);bottom:40px;-webkit-transition:all .3s ease-out 0s;-o-transition:all .3s ease-out 0s;transition:all .3s ease-out 0s}
.entry-bar .meta-item:hover .dashang-img{pointer-events:auto}
.entry-bar .meta-item.wechat:hover{color:#44b549}
.entry-bar .meta-item.weibo:hover{color:#e05244}
.entry-bar .meta-item.qq:hover{color:#22a4ff}
.entry-bar .meta-item.douban:hover{color:#33b045}
.entry-bar .meta-item.douban:hover svg{fill:#33b045}
.entry-bar .meta-item.qzone:hover{color:#fdbf2f}
.entry-bar .meta-item.qzone:hover svg{fill:#fdbf2f}
.entry-bar .meta-item.linkedin:hover{color:#0077b5}
.entry-bar .meta-item.facebook:hover{color:#44619d}
.entry-bar .meta-item.twitter:hover{color:#55acee}
.entry-bar .meta-item.dashang .wi{font-size:18px}.dashang-img span,.entry-bar .wi{font-size:16px;vertical-align:top}

@media (max-width:767px){.entry-bar .dashang-img{left:auto;right:0}
.entry-bar .dashang-img:after,.entry-bar .dashang-img:before{left:100%;margin-left:-26px}}.dashang-img,.entry-bar .meta-item:hover,.entry-bar.fixed .entry-bar-inner{-webkit-transition:all .3s ease-out 0s;-o-transition:all .3s ease-out 0s;transition:all .3s ease-out 0s}
.entry-bar.fixed .entry-bar-inner{position:fixed;bottom:0;padding:10px 20px;border-top:1px solid var(--top);background:var(--background)}
@media (max-width:991px){.entry-bar.fixed .entry-bar-inner{position:relative}}

.dashang-img{opacity:0;filter:alpha(opacity=0);position:absolute;z-index:9;left:50%;bottom:50px;width:160px;margin-left:-81px;line-height:1;text-align:center;border:1px solid #efefef;background:#fff;-webkit-box-shadow:0 0 3px 1px rgba(0,0,0,.05);box-shadow:0 0 3px 1px rgba(0,0,0,.05);-webkit-box-sizing:content-box;box-sizing:content-box;pointer-events:none}.dashang-img:after,.dashang-img:before{position:absolute;left:50%;width:0;height:0;margin-left:-8px;line-height:0;border:8px solid transparent;content:""}.dashang-img:before{bottom:-16px;border-top-color:#efefef}.dashang-img:after{z-index:1;bottom:-15px;border-top-color:#fff}.dashang-img canvas,.dashang-img img{display:block;width:100%;height:auto;padding:10px 10px 0}.dashang-img span{display:inline-block;width:160px;padding-bottom:10px;color:#999;font-size:12px;line-height:1}.dashang-img span img{margin-bottom:2px}.dashang-img2{width:330px;font-size:0;margin-left:-166px}@media (max-width:767px){.dashang-img2{width:300px;left:auto;right:0;margin-left:0}.dashang-img2:after,.dashang-img2:before{right:76px;margin-right:-8px;left:auto;margin-left:0}.dashang-img2 span{max-width:50%}}

.entry-bar-inner{position:relative;z-index:99;padding:10px 0;border-top:1px solid transparent;-webkit-transition:all .3s ease-out 0s;-o-transition:all .3s ease-out 0s;transition:all .3s ease-out 0s}.entry-bar-inner .author a{display:inline-block;text-decoration:none}
.entry-bar-inner .author img{display:inline-block;width:36px;height:36px;margin-right:5px;border-radius:50%;vertical-align:top}
.entry-bar-inner .author-name{max-width:120px;line-height:36px;display:inline-block;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:top}
.entry-bar-inner .user-group{position:relative;z-index:0;display:inline-block;padding:4px 8px;margin-left:8px;color:var(--classB);font-size:12px;font-weight:400;line-height:1;vertical-align:top;border-radius:3px;border:1px solid var(--theme-color);overflow:hidden;margin-top:7px}
.entry-bar-inner .user-group:before{position:absolute;z-index:-1;left:0;top:0;width:100%;height:100%;background-color:var(--background);content:""}
.entry-bar-inner .user-group:after{position:absolute;z-index:0;left:-1px;top:-1px;right:-1px;bottom:-1px;content:"";background:var(--background);opacity:.148}


.entry-bar{margin:30px -20px -20px;-webkit-box-shadow:0 -1px 0 0 rgba(0,0,0,.05);box-shadow:0 -1px 0 0 rgba(0,0,0,.05)}

@media (max-width:767px){.entry-bar{margin:30px 0 0;-webkit-box-shadow:none;box-shadow:none}}
 .entry-bar-inner{padding:11px 20px}
@media (max-width:767px){ .entry-bar-inner{padding:10px 0}}
.entry-action{margin-top:30px;margin-bottom:30px;text-align:center}


.mobile-share-bg{position:fixed;left:0;top:0;width:100%;height:100%;z-index:99999;background:hsl(var(--theme-color-hsl));opacity:.5}

.mobile-share-wrap,.mobile-share-wrap .top_tips{position:fixed;width:100%;left:0;top:0;text-align:center}.mobile-share-wrap{height:100vh;z-index:100000;overflow-y:scroll;padding:10vh 0}.mobile-share-wrap .top_tips{display:none;z-index:9;height:32px;line-height:32px;font-size:14px;background:rgba(255,235,155,.95);color:#a65018}@media (min-width:992px){.mobile-share-wrap .top_tips{display:none!important}}.mobile-share-wrap .loading{display:inline-block;padding:30px 60px;text-align:center;font-size:14px;line-height:20px;color:var(--theme-gray-color);background:var(--theme-el-bg-color);border-radius:4px}.mobile-share-wrap .loading img{display:block;width:30px;height:30px;margin-bottom:10px}.mobile-share-wrap .wpcom-icon-loader{font-size:16px;margin-right:5px;color:var(--theme-light-color);-webkit-animation:rotating 2s linear infinite;animation:rotating 2s linear infinite;vertical-align:top}.mobile-share-wrap .mobile-share-close{position:relative;display:inline-block;margin-top:-23px;width:46px;height:46px;font-size:26px;line-height:46px;color:var(--theme-gray-color);border-radius:50%;background:var(--theme-el-bg-color);text-align:center;vertical-align:top;font-family:serif;-webkit-box-shadow:0 0 1px 0 hsla(var(--theme-color-hsl),.4);box-shadow:0 0 1px 0 hsla(var(--theme-color-hsl),.4);cursor:pointer}

.mobile-share-container{position:relative;width:375px;max-width:96vw;margin:0 auto}

.mobile-share-inner{width:100%;text-align:left;background:var(--theme-el-bg-color);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:4px;overflow:hidden}
.mobile-share-inner+.mobile-share-canvas{position:absolute;left:0;right:0;bottom:0;top:0}

.mobile-share-canvas .canvas-loading{position:absolute;top:50%;left:50%;padding:15px;margin-top:-31px;margin-left:-31px;border-radius:4px;background:rgba(0,0,0,.3)}

.mobile-share-canvas .wpcom-icon-loader{margin:0;font-size:32px;line-height:1;color:#fff}

.mobile-share-canvas img,.mobile-share-head img{width:100%;height:auto}

.mobile-share-head{position:relative;font-family:Noto Sans SC,sans-serif;letter-spacing:.5px}

.mobile-share-title{position:absolute;z-index:0;bottom:0;left:0;right:0;padding:40px 20px 20px;margin:0;color:#fff;font-size:18px;font-weight:500;line-height:26px;text-align:justify}

.mobile-share-title-bg{position:absolute;z-index:-1;left:0;bottom:0;right:0;height:100%;background:-o-linear-gradient(top,transparent 0,rgba(0,0,0,.5) 100%);background:linear-gradient(180deg,transparent,rgba(0,0,0,.5))}

.mobile-share-body{position:relative;padding:20px 20px 22px}

.mobile-share-body-line{text-align:center;position:absolute;bottom:0;left:20px;width:calc(100% - 40px);font-size:10px;line-height:1;color:var(--theme-line-color);letter-spacing:4px;white-space:nowrap;overflow:hidden}
.mobile-share-meta{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;line-height:24px;font-size:12px;font-weight:400;color:var(--theme-light-color);font-family:Noto Sans SC,sans-serif;overflow:hidden}

.mobile-share-author img{display:inline-block;width:24px;height:24px;margin-right:5px;vertical-align:top;border-radius:50%;overflow:hidden;background:#eee}
.mobile-share-text{font-size:14px;color:var(--theme-gray-color);line-height:1.6;text-align:justify;font-family:Noto Sans SC,sans-serif;letter-spacing:.5px}
.mobile-share-text br{display:block;margin:10px 0;content:""}

.mobile-share-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:20px;overflow:hidden}

.mobile-share-logo{width:100%;margin-right:20px}
.mobile-share-logo img{max-width:100%;max-height:80px;width:auto;height:auto}
.mobile-share-qr{position:relative;-ms-flex-negative:0;flex-shrink:0;width:80px;height:80px}
.mobile-share-qrcode{width:80px;height:80px;padding:5px;-webkit-box-sizing:border-box;box-sizing:border-box}
.mobile-share-qrcode img{display:block;width:70px;height:70px}
.mobile-share-qrbg{position:absolute;left:0;top:0;width:100%;height:100%}
.mobile-share-qrbg img{display:block;width:100%;height:100%}.multi-filter{padding:20px;margin-bottom:20px;background:var(--theme-el-bg-color)}



.reading,.reading:before{-webkit-transition:all .3s ease-out 0s;-o-transition:all .3s ease-out 0s;transition:all .3s ease-out 0s}

.reading:before{width:100%;height:100%;left:0;top:0;right:0;bottom:0;background:#f0f0f0;content:""}

.reading .Qc_main{-webkit-transition:all .5s ease-out 0s;-o-transition:all .5s ease-out 0s;transition:all .5s ease-out 0s}

.reading .kiwi_header,.reading .Qc_aside .Qc_aside_item,.reading .entry-bar,.reading .entry-related-posts,.reading .entry-related-title,.reading .post-comments, .reading .Qc_footer{display: none;}

.reading .entry-main{padding:20px 0}

.reading .reading-back,.reading .reading-back .wi,.reading .reading-back:hover .wi{-webkit-transition:all .3s ease-out 0s;-o-transition:all .3s ease-out 0s;transition:all .3s ease-out 0s}
.reading .reading-back{position:fixed;z-index:10000;right:30px;top:50px;cursor:pointer}
.reading .reading-back .wi,.reading .reading-back:hover .wi{color:var(--theme)}
.reading .reading-back .wi{font-size:48px;color:var(--main)}

.reading .Qc_aside .sticky_layout{top: 100px;}


.post-meta {
    font-size: 1rem;
    color: #444;
    margin-bottom: 0.4rem;
}

.post-meta-line {
    padding: 5px 10px;
}

.post-meta span {
    display: inline-block;
}

.post-meta a, .post-meta a::before,  .post-meta a::after {
    text-decoration: none;
    color: var(--theme);
    /* color: #353535; */
}

[data-night="night"]  .post-meta{
    color: #a3a3a3;
}

.entry-related-posts{margin-bottom:30px}
.entry-related-posts{background:var(--background);padding:20px;margin-bottom:20px}


@media (max-width:1239px){
    .entry-related-posts{padding:20px;}
}
    
@media (max-width:767px){
    .entry-related-posts{padding:0;background:0 0}
}

.entry-related-title{margin:0 0 20px;font-size:18px;font-weight:500}

.entry-related-title{position:relative;padding:0 0 0 12px}

.entry-related-title:before{position:absolute;left:0;top:1px;width:3px;height:calc(100% - 2px);content:"";background-color:var(--theme-color);background-image:-o-linear-gradient(top,rgba(255,255,255,.15),transparent);background-image:linear-gradient(180deg,rgba(255,255,255,.15),transparent);border-radius:3px}


.Xc_home_articie-si.default {
    display: flex;
    position: relative;
}

.Xc_home_articie-si {
    box-shadow: var(--darkreader-bg--box-shadow);
    background: var(--darkreader-bg--background);
}
.Xc_home_articie-si {
    position: relative;
    width: 100%;
    background: var(--background);
    border-radius: var(--radius-wrap);
    padding: 15px;
    box-shadow: var(--box-shadow);
    margin-bottom: 20px;
}

.Xc_home_articie-si.default .thumbnail {
    flex-shrink: 0;
    position: relative;
    width: 210px;
    height: 140px;
    margin-right: 15px;
    overflow: hidden;
    border-radius: var(--radius-inner);
}

.Xc_home_articie-si.default .thumbnail img {
    width: 100%;
    height: 100%;
    -o-object-fit: cover;
    object-fit: cover;
    transition: .35s;
}

.Xc_home_articie-si.default .information {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-width: 0;
}

.Xc_home_articie-si .information .title {
    color: var(--darkreader-text--main);
}
.Xc_home_articie-si .information .title {
    margin-bottom: 10px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    word-break: break-word;
    color: var(--main);
    font-size: 18px;
    line-height: 24px;
    max-height: 48px;
    transition: color 0.35s;
}

.Xc_home_articie-si .information .title .badge {
    background-image: initial;
    background-color: rgba(165, 29, 42, 0.81);
    color: rgb(232, 230, 227);
}
.Xc_home_articie-si .information .title .badge {
    height: 20px;
    line-height: 20px;
    background: #dc3545cf;
    color: #fff;
    font-size: 12px;
    margin-right: 5px;
    border-radius: 2px;
    padding: 0 8px;
    white-space: nowrap;
    vertical-align: 2px;
}

.Xc_home_articie-si .abstract {
    color: var(--darkreader-text--minor);
}
.Xc_home_articie-si .abstract {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--minor);
    word-break: break-word;
    line-height: 22px;
    max-height: 44px;
    opacity: 0.85;
}

.Xc_home_articie-si .meta {
    color: var(--darkreader-text--minor);
}
.Xc_home_articie-si .meta {
    display: flex;
    align-items: center;
    margin-top: auto;
    color: var(--minor);
    font-size: 13px;
}

.Xc_home_articie-si .meta .items {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
}


.Xc_home_articie-si .meta .items li {
    display: flex;
    align-items: center;
    margin-right: 15px;
}

.Xc_home_articie-si .meta .last {
    margin-left: auto;
    display: flex;
    align-items: center;
}

.icon2 {
    fill: currentcolor;
}
.icon2 {
    width: 1rem;
    height: 1rem;
    margin-right: 2px;
    fill: currentColor;
    overflow: hidden;
    flex-shrink: 0;
}

.Xc_home_articie-si .meta .last .link {
    color: var(--darkreader-text--minor);
}
</style>

{{ $isComment := .Params.comment.enable | default .Site.Params.comments.enable }}
{{ .Scratch.Set "isComment" $isComment }}
<div class="Qc_main Qc_post">
    <div class="Qc_detail">
        <h1 class="title Qc_detail_title"> {{ .Title }}</h1>

        <div class="post-meta">
            
            <div class="post-meta-line">
                <i class="wpcom-icon wi">
                    <svg aria-hidden="true">
                        <use xlink:href="#wi-date"></use>
                    </svg>
                </i>
                <time datetime="{{ .Date.Format .Site.Params.dateFormat }}">于&nbsp;{{ .Date.Format .Site.Params.dateFormat }}&nbsp;发表</time>&nbsp;&nbsp;&nbsp;&nbsp;
                <i class="wpcom-icon wi">
                    <svg aria-hidden="true">
                        <use xlink:href="#wi-comments"></use>
                    </svg>
                </i>
                <span class="waline-comment-count"  data-path="{{ .RelPermalink | relLangURL }}" ><i class="fa fa-refresh faq-rotating"></i></span>
                条评论&nbsp;&nbsp;&nbsp;&nbsp;
                <i class="wpcom-icon wi">
                    <svg aria-hidden="true">
                        <use xlink:href="#wi-eye"></use>
                    </svg>
                </i>
                <span class="waline-pageview-count" data-path="{{ .RelPermalink | relLangURL }}"><i class="fa fa-refresh faq-rotating"></i></span>
                次阅读&nbsp;&nbsp;&nbsp;&nbsp;
            </div>

            <div class="post-meta-line">
                <i class="wpcom-icon wi">
                    <svg aria-hidden="true">
                        <use xlink:href="#wi-folder-open"></use>
                    </svg>
                </i>
                <span class="post-category">收录于 

                    {{ if .Site.Params.postMeta.categories }}
                    {{ with .Params.categories }}


                    {{ range $name :=  . }}

                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a class="link" href="{{ (printf "/categories/%s" $name)  | relLangURL }}" itemprop="url" rel="noopener noreferrer index">
                    <span itemprop="name">{{ $name }} </span>
                  </a>
                </span>
                {{ end }}
                {{ end }}
                {{ end }}
                </span>
            </div>

        </div>

        <div class="Qc_detail_category"> </div>
        <article class="Qc_detail_article" id="article-container">
            {{ .Content }}
        </article>
    </div>

    <div id="share-info-hidden" 
        data-title="{{ .Title}}" 
        data-summary="{{ substr .Summary 0 120 }}..." 
        data-url="https:{{ .Permalink }}" 
        data-image="{{.Params.cover.image }}" style="visibility: hidden;"></div>

    <div class="entry-bar fixed" style="">
        <div class="entry-bar-inner clearfix" style="width: 860px;">
            <div class="info text-center">
                <div class="info-item meta">  </div>
                <div class="info-item share">
                    <a class="meta-item mobile j-mobile-share" href="javascript:;" data-id="192649" data-qrcode="https://www.wpmee.com/192649.html">
                        <i class="wpcom-icon wi">
                            <svg aria-hidden="true">
                                <use xlink:href="#wi-share"></use>
                            </svg>
                        </i> 生成海报
                    </a>

                
                <a class="meta-item qq" data-share="qq"  rel="nofollow"  target="_blank" href="https://connect.qq.com/widget/shareqq/index.html?url=https:{{ .Permalink }}&title={{ .Title }}&pics={{ .Params.cover.image }}&desc={{ substr .Summary 0 120 }}……&summary={{ substr .Summary 0 120 }}…… " >
                        <i class="wpcom-icon wi">
                            <svg aria-hidden="true">
                                <use xlink:href="#wi-qq"></use>
                            </svg>
                        </i>
                    </a>
                
                    <a class="meta-item qzone" data-share="qzone" target="_blank" rel="nofollow" href=" http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https:{{ .Permalink }}&title={{ .Title }}&site=&pics={{ .Params.cover.image }}&desc={{ substr .Summary 0 120 }}……&summary={{ substr .Summary 0 120 }}…… ">
                        <i class="wpcom-icon wi">
                            <svg aria-hidden="true">
                                <use xlink:href="#wi-qzone"></use>
                            </svg>
                        </i>
                    </a>

                
                    <a class="meta-item weibo" data-share="sina" target="_blank" rel="nofollow" href=" http://service.weibo.com/share/share.php?title={{ .Title }}「{{ .Title }}」 点这里{{ .Params.cover.Image }}&pic={{ .Params.cover.Image }}">
                        <i class="wpcom-icon wi">
                            <svg aria-hidden="true">
                                <use xlink:href="#wi-weibo"></use>
                            </svg>
                        </i>
                    </a>
                    <a class="meta-item wechat" data-share="wechat" target="" rel="nofollow" href="javascript:">
                        <i class="wpcom-icon wi">
                            <svg aria-hidden="true">
                                <use xlink:href="#wi-wechat"></use>
                            </svg>
                        </i>
                        <span class="share-wx-wrap">
                            <span class="j-share-qrcode">
                                <!-- <canvas width="256" height="256"></canvas> -->
                            </span>
                            <span>微信扫码分享</span>
                        </span>
                    </a>
                    
                
                
                </div>
                <div class="info-item act">
                    <a href="javascript:;" id="j-reading"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-article"></use></svg></i></a>
                </div>
            </div>
        </div>
    </div>


     <!-- 上一篇 下一篇 -->
     <div class="entry-page">
        {{ with .PrevInSection }}
        <div class="entry-page-prev j-lazy" style="background-image: url({{ (.Params.cover.image) | absURL }})">
            <a href="{{ .RelPermalink | relLangURL }}"> 
                <span>{{ .Title }}</span> 
            </a>
            <div class="entry-page-info"> 
                <span class="pull-left">« 上一篇</span> 
                <span class="pull-right">{{ .Date.Format .Site.Params.dateFormat }}</span>
            </div>
        </div>
        {{ end }}

        {{ with .NextInSection }} 
        <div class="entry-page-next j-lazy" style="background-image: url({{ (.Params.cover.image) | absURL }})">
            <a href="{{ .RelPermalink | relLangURL }}">
                <span>{{ .Title }}</span> 
            </a>
            <div class="entry-page-info"> 
                <span class="pull-right">下一篇  »</span> 
                <span class="pull-left">{{ .Date.Format .Site.Params.dateFormat }}</span>
            </div>
        </div> 
        {{ end }}

    </div>

    <div class="entry-related-posts">
        <h3 class="entry-related-title">相关推荐</h3>
        <div>
            {{ $related := .Site.RegularPages.Related . | first 5 }}
            {{ with $related }}

            {{ range . }}

           
            <li class="Xc_home_articie-si default">
                <a href="{{ .RelPermalink }}" class="thumbnail" title="{{ .Title }}" rel="noopener noreferrer">
                    <img width="100%" height="100%" class=" ls-is-cached lazyloaded-6" src="{{ .Params.cover.image }}"  alt="{{ .Title }}">
                  
                    {{ .Date }} 
 
                </a>
                <div class="information">
                    <a href="{{ .RelPermalink }}" class="title" title="{{ .Title }}" rel="noopener noreferrer">
                     {{ .Title }}
                    </a>
                    <a class="abstract" href="{{ .RelPermalink }}" title="文章摘要" rel="noopener noreferrer">{{ .Summary }}</a>
                    <div class="meta">
                        <ul class="items">
                            <li>
                                <i class="wpcom-icon wi">
                                    <svg aria-hidden="true">
                                        <use xlink:href="#wi-date"></use>
                                    </svg>
                                </i>
                                <time datetime="{{ .Date.Format .Site.Params.dateFormat }}">&nbsp;{{ .Date.Format .Site.Params.dateFormat }}</time>
                            
                            </li>
                           
                        </ul>
                        <div class="last" style="display:flex">
                            <i class="wpcom-icon wi">
                                <svg aria-hidden="true">
                                    <use xlink:href="#wi-folder-open"></use>
                                </svg>
                            </i>&nbsp;&nbsp;
                    
                            {{ if .Site.Params.postMeta.categories }}
                            {{ with .Params.categories }}
        
        
                            {{ range $name :=  . }}

                            <a class="link" rel="noopener noreferrer" href="{{ (printf "/categories/%s" $name)  | relLangURL }}">{{ $name }}</a>&nbsp;&nbsp;
                             
    
                        {{ end }}
                        {{ end }}
                        {{ end }}
                            
                        </div>
                    </div>
                </div>
            </li>
            {{ end }}

            {{ end }}



        </div>
                    
    </div>

    {{ if and .IsPage $isComment }}
       	{{ partialCached "comments.html" . }}
    {{ end }}
</div>

<script type="text/javascript">
    (function () {
        var pres = document.querySelectorAll('pre');
        var lineNumberClassName = 'line-numbers';
        pres.forEach(function (item, index) {
            item.className = item.className == '' ? lineNumberClassName : item.className + ' ' + lineNumberClassName;
        });


        let mainWidth = document.querySelector(".Qc_main").clientWidth
        document.querySelector('.entry-bar-inner').style.width = mainWidth  + 'px'

        let readingDom = document.getElementById('j-reading')
        readingDom.addEventListener('click',() => {
            document.querySelector('body').classList.add('reading')

            let backReadingHtml = `<div class="reading-back" id="j-reading-back" onclick="readingBack()">
                                        <i class="wpcom-icon wi">
                                            <svg aria-hidden="true">
                                                <use xlink:href="#wi-back"></use>
                                            </svg>
                                        </i>
                                    </div>`
            let backReadingNode = document.createRange().createContextualFragment( backReadingHtml);

            document.querySelector('body').appendChild(backReadingNode)

            localStorage.setItem("reading", 'on');
        })

        
        
    })();

    function readingBack(){
        let readingBackDom =  document.getElementById('j-reading-back')
        document.querySelector('body').classList.remove('reading')
        document.querySelector('body').removeChild(readingBackDom)
        localStorage.setItem("reading", 'off');
    }

    let shareInfo = document.querySelector('#share-info-hidden')
    let shareTitle,shareUrl,shareSummary,shareImage
    if(shareInfo){
        shareTitle = shareInfo.dataset.title
        shareSummary = shareInfo.dataset.summary
        shareUrl = shareInfo.dataset.url
        shareImage =shareInfo.dataset.image
    }

    

    function posterLoading(){
        let laodHtml = `<div class="mobile-share-bg"></div>
                        ><div class="mobile-share-wrap">
                            <div class="loading">
                                <i class="wpcom-icon wi wpcom-icon-loader">
                                    <svg aria-hidden="true">
                                        <use xlink:href="#wi-loader"></use>
                                    </svg>
                                </i>
                                正在生成海报中……
                            </div>
                        </div>`

        
        let loadNode = document.createRange().createContextualFragment(laodHtml);

        document.querySelector('body').appendChild(loadNode)
    }

    let bodyDom = document.querySelector('body')

    function generatorPosterHtml(){

        bodyDom.removeChild(document.querySelector('.mobile-share-bg'))
        bodyDom.removeChild(document.querySelector('.mobile-share-wrap'))
       
        let shareWrapDiv = `<div class="mobile-share-bg"></div>
                            <div class="mobile-share-wrap">
                                <div class="top_tips" style="display: block;">请长按保存图片，将内容分享给更多好友</div>
                                <div class="mobile-share-container">
                                    <div class="mobile-share-inner" >
                                        <div class="mobile-share-head">
                                            <img src="{{.Params.cover.image }}">
                                            <h2 class="mobile-share-title">
                                                <div class="mobile-share-title-bg"></div>
                                                {{ .Title }}
                                            </h2>
                                        </div>
                                        <div class="mobile-share-body">
                                            <div class="mobile-share-meta">
                                                <div class="mobile-share-time">{{ .Date.Format .Site.Params.dateFormat }}</div>
                                            </div>
                                            <div class="mobile-share-text">
                                                <p>
                                                    {{ substr .Summary 0 120 }}
                                                </p>
                                            </div>
                                            <div class="mobile-share-body-line">______________________________________</div>
                                        </div>
                                        <div class="mobile-share-footer">
                                            <div class="mobile-share-logo">
                                                <img src="/static/front/images/qiu-logo.png">
                                            </div>
                                            <div class="mobile-share-qr">
                                                <div class="mobile-share-qrbg">
                                                    <img src="data:image/svg+xml,%3Csvg width='82' height='82' viewBox='0 0 82 82' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M81 63v18H61m-41 0H1V62m0-43V1h20m40 0h20v18' stroke='%232157B2' fill='none' fill-rule='evenodd' opacity='.405' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E" alt="bg">
                                                </div>
                                                <div class="mobile-share-qrcode">
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mobile-share-canvas">
                                        <img src="">
                                    </div>
                                    
                                </div>
                                <div class="mobile-share-close" onclick="closePoster(event)">
                                    <i class="wpcom-icon wi">
                                        <svg aria-hidden="true">
                                            <use xlink:href="#wi-close"></use>
                                        </svg>
                                    </i>
                                </div>
                            </div>`
       
        let shareHtml = document.createRange().createContextualFragment(shareWrapDiv);

        bodyDom.appendChild(shareHtml)
    }

  

    let genPoster = document.querySelector(".j-mobile-share")
    genPoster.addEventListener("click",() => {

        posterLoading()

        generatorPosterHtml()

        let genPostQrcode = document.querySelector(".mobile-share-qrcode")

        new QRCode(genPostQrcode , window.location.href)


        setTimeout(function(){
            html2canvas(document.querySelector(".mobile-share-inner"), {
                scale:2,
                useCORS:true,
                scrollY: 0, 
                backgroundColor: null 
            }).then(canvas => {

                document.querySelector('.mobile-share-inner').style.visibility ='hidden'
                var i = canvas.toDataURL("image/png"); 
                document.querySelector(".mobile-share-canvas").innerHTML = '<img src="' + i + '">'
            });
        }, 150);

       

        
    })

    function closePoster(e){
        e.stopPropagation()
        bodyDom.removeChild(document.querySelector('.mobile-share-bg'))
        bodyDom.removeChild(document.querySelector('.mobile-share-wrap'))

    }

   
    let wechatIcon = document.querySelector('.meta-item.wechat .wpcom-icon')
    let wechatQrcode = document.querySelector('.share-wx-wrap .j-share-qrcode')

    wechatIcon.addEventListener("mouseenter",() => {
        let currentUrl = window.location.href,text
        if(currentUrl.indexOf('#') > -1 ){
            text = currentUrl.substring(0,currentUrl.indexOf('#'))
        }else{
            text = currentUrl
        }
       
        new QRCode(wechatQrcode,text )

        
    })

    wechatIcon.addEventListener("mouseleave",() => {
        let childs = wechatQrcode.childNodes; 
        for(let i = 0; i < childs.length; i++) { 
             
            wechatQrcode.removeChild(childs[i]); 
        } 
    })


 
</script>

{{- end }}


